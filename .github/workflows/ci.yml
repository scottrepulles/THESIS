name: CI â€“ Tower Defense

on:
  push:
    branches: [cicd]

jobs:
  ci:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: CI validation banner
        run: |
          echo "ğŸš€ CI started for Tower Defense"
          echo "Commit: $GITHUB_SHA"

      - name: Verify GameMaker project exists
        run: |
          PROJECT="Tower Defense v1(back up6)"

          if [ ! -d "$PROJECT" ]; then
            echo "âŒ Project folder not found"
            exit 1
          fi

          if ! ls "$PROJECT"/*.yyp >/dev/null 2>&1; then
            echo "âŒ No .yyp GameMaker project file found"
            exit 1
          fi

          echo "âœ… GameMaker project folder and .yyp file found"

      - name: Verify GameMaker project type
        run: |
          PROJECT_FILE=$(ls "Tower Defense v1(back up6)"/*.yyp)

          grep -q '"resourceType":"GMProject"' "$PROJECT_FILE"

          echo "âœ… Confirmed GameMaker project type"

      - name: CI complete
        run: echo "ğŸ‰ CI passed successfully"
